version: 1
updated: "2026-01-31T16:00:00Z"

template:
  replace_me: false
  note: "Derived from existing project via project-derive skill on 2026-01-31"

project:
  name: "Obsidian-Supernote Sync"
  summary: "Bi-directional sync tool between Obsidian vault and Supernote e-ink devices with handwriting preservation"
  repo_root: "C:/Edwin/repos/obsidian-supernote-sync"

retention:
  policy: active-and-recent
  recent_changes_max: 25
  keep_closed_issues_in_snapshot: false
  keep_done_tasks_in_snapshot: false
  keep_done_features_in_snapshot: true  # Keep done features for history
  note: "Snapshot keeps active work + recent changes; notes are the archive."

docs_system:
  source_of_truth: SNAPSHOT.yaml
  instructions:
    - tools/instructions/OBSIDIAN.md
    - tools/instructions/LIFECYCLE.md
  references:
    - docs/PHASES.md
    - PLAN.md
    - docs/IMPLEMENTATION_STATUS.md

counters:
  ADR: 3
  CHG:
    last_date: 20260131
  FEAT: 6
  ISS: 0
  REQ: 6
  RISK: 3
  TASK: 12
  TST: 5
  WF: 5

focus:
  phase: 3
  feature: "FEAT-0004"
  task: ""
  issue: ""

items:
  features:
    FEAT-0001:
      file: "docs/features/FEAT-0001-Manual-CLI-Frontmatter.md"
      title: "Phase 2: Manual CLI with Frontmatter Support"
      status: "done"
      owner: "Edwin"
      goal: "Enable users to control .note type and updates via frontmatter properties with manual CLI commands"
      phase: 2
      requirements: ["REQ-0001", "REQ-0002"]
      tasks: ["TASK-0001", "TASK-0002", "TASK-0003", "TASK-0004"]
      tests: ["TST-0001"]
      release: "v0.2.0-alpha"

    FEAT-0002:
      file: "docs/features/FEAT-0002-Python-Backend-API.md"
      title: "Phase 3A: Python Backend API (FastAPI)"
      status: "done"
      owner: "Edwin"
      goal: "Create FastAPI server wrapping existing converters with REST API and WebSocket support"
      phase: 3
      requirements: ["REQ-0003"]
      tasks: ["TASK-0005", "TASK-0006", "TASK-0007", "TASK-0008"]
      tests: []
      release: "v0.3.0-alpha"

    FEAT-0003:
      file: "docs/features/FEAT-0003-Web-Dashboard-MVP.md"
      title: "Phase 3B: Web Dashboard MVP"
      status: "done"
      owner: "Edwin"
      goal: "Create React + Tailwind web dashboard for workflow management and conversion UI"
      phase: 3
      requirements: ["REQ-0004"]
      tasks: ["TASK-0009", "TASK-0010"]
      tests: []
      release: "v0.3.0-alpha"

    FEAT-0004:
      file: "docs/features/FEAT-0004-Obsidian-Plugin.md"
      title: "Phase 3C: Obsidian Plugin"
      status: "in-progress"
      owner: "Edwin"
      goal: "Create TypeScript Obsidian plugin for native integration with ribbon, commands, and settings"
      phase: 3
      requirements: ["REQ-0005"]
      tasks: ["TASK-0011", "TASK-0012"]
      tests: []
      release: "v0.4.0-alpha"

    FEAT-0005:
      file: "docs/features/FEAT-0005-Visual-Workflow-Builder.md"
      title: "Phase 3D: Visual Workflow Builder"
      status: "planned"
      owner: "unassigned"
      goal: "Implement drag-and-drop workflow designer with React Flow"
      phase: 3
      requirements: ["REQ-0006"]
      tasks: []
      tests: []
      release: ""

    FEAT-0006:
      file: "docs/features/FEAT-0006-Cloud-Integration.md"
      title: "Phase 4: Advanced Features & Cloud Integration"
      status: "backlog"
      owner: "unassigned"
      goal: "Cloud sync via Supernote Cloud API, scheduled workflows, conflict resolution"
      phase: 4
      requirements: []
      tasks: []
      tests: []
      release: ""

  tasks:
    TASK-0001:
      file: "docs/features/FEAT-0001-Manual-CLI-Frontmatter.md"
      title: "Implement frontmatter property parsing"
      status: "done"
      owner: "Edwin"
      parent: "FEAT-0001"
      effort: "M"
      tests: ["TST-0001"]

    TASK-0002:
      file: "docs/features/FEAT-0001-Manual-CLI-Frontmatter.md"
      title: "Implement .note file update mode"
      status: "done"
      owner: "Edwin"
      parent: "FEAT-0001"
      effort: "L"
      tests: []

    TASK-0003:
      file: "docs/features/FEAT-0001-Manual-CLI-Frontmatter.md"
      title: "Add realtime recognition support"
      status: "done"
      owner: "Edwin"
      parent: "FEAT-0001"
      effort: "S"
      tests: []

    TASK-0004:
      file: "docs/features/FEAT-0001-Manual-CLI-Frontmatter.md"
      title: "Create configuration examples and documentation"
      status: "done"
      owner: "Edwin"
      parent: "FEAT-0001"
      effort: "M"
      tests: []

    TASK-0005:
      file: "docs/features/FEAT-0002-Python-Backend-API.md"
      title: "Create FastAPI server structure"
      status: "done"
      owner: "Edwin"
      parent: "FEAT-0002"
      effort: "M"
      tests: []

    TASK-0006:
      file: "docs/features/FEAT-0002-Python-Backend-API.md"
      title: "Implement conversion endpoints"
      status: "done"
      owner: "Edwin"
      parent: "FEAT-0002"
      effort: "M"
      tests: []

    TASK-0007:
      file: "docs/features/FEAT-0002-Python-Backend-API.md"
      title: "Add WebSocket support for progress"
      status: "done"
      owner: "Edwin"
      parent: "FEAT-0002"
      effort: "M"
      tests: []

    TASK-0008:
      file: "docs/features/FEAT-0002-Python-Backend-API.md"
      title: "Implement workflow endpoints"
      status: "done"
      owner: "Edwin"
      parent: "FEAT-0002"
      effort: "M"
      tests: []

    TASK-0009:
      file: "docs/features/FEAT-0003-Web-Dashboard-MVP.md"
      title: "Set up React + Vite + Tailwind project"
      status: "done"
      owner: "Edwin"
      parent: "FEAT-0003"
      effort: "S"
      tests: []

    TASK-0010:
      file: "docs/features/FEAT-0003-Web-Dashboard-MVP.md"
      title: "Create workflow UI and configuration panels"
      status: "done"
      owner: "Edwin"
      parent: "FEAT-0003"
      effort: "L"
      tests: []

    TASK-0011:
      file: "docs/features/FEAT-0004-Obsidian-Plugin.md"
      title: "Set up TypeScript plugin skeleton"
      status: "done"
      owner: "Edwin"
      parent: "FEAT-0004"
      effort: "S"
      tests: []

    TASK-0012:
      file: "docs/features/FEAT-0004-Obsidian-Plugin.md"
      title: "Implement ribbon button and commands"
      status: "doing"
      owner: "Edwin"
      parent: "FEAT-0004"
      effort: "M"
      tests: []

  issues: {}

  requirements:
    REQ-0001:
      file: "docs/requirements/REQ-0001-Frontmatter-Parsing.md"
      title: "CLI reads and respects frontmatter properties"
      status: "verified"
      owner: "Edwin"
      priority: "high"
      scope: "converters"
      acceptance:
        - "CLI reads frontmatter properties from markdown"
        - "Properties override default settings"
        - "Properties are optional with graceful fallback"
        - "Validation prevents invalid configurations"
      implements: ["FEAT-0001"]
      tests: ["TST-0001"]

    REQ-0002:
      file: "docs/requirements/REQ-0002-Update-Mode.md"
      title: "Update existing .note files preserving handwriting"
      status: "verified"
      owner: "Edwin"
      priority: "high"
      scope: "converters"
      acceptance:
        - "Can update existing .note files"
        - "Handwritten annotations preserved exactly"
        - "New template content displays correctly"
        - "Updated .note opens on device without errors"
      implements: ["FEAT-0001"]
      tests: []

    REQ-0003:
      file: "docs/requirements/REQ-0003-REST-API.md"
      title: "REST API wrapping existing converters"
      status: "verified"
      owner: "Edwin"
      priority: "high"
      scope: "api"
      acceptance:
        - "All conversion functions accessible via HTTP endpoints"
        - "Real-time progress updates via WebSocket"
        - "Workflow management endpoints functional"
      implements: ["FEAT-0002"]
      tests: []

    REQ-0004:
      file: "docs/requirements/REQ-0004-Web-Dashboard.md"
      title: "Web dashboard for workflow management"
      status: "verified"
      owner: "Edwin"
      priority: "medium"
      scope: "dashboard"
      acceptance:
        - "Pre-defined workflow selection UI"
        - "Configuration panels for folders and devices"
        - "Sync status and history display"
      implements: ["FEAT-0003"]
      tests: []

    REQ-0005:
      file: "docs/requirements/REQ-0005-Obsidian-Plugin.md"
      title: "Obsidian plugin for native integration"
      status: "draft"
      owner: "Edwin"
      priority: "high"
      scope: "plugin"
      acceptance:
        - "Ribbon button for quick actions"
        - "Commands for convert, sync, dashboard"
        - "Settings tab for configuration"
      implements: ["FEAT-0004"]
      tests: []

    REQ-0006:
      file: "docs/requirements/REQ-0006-Visual-Workflow-Builder.md"
      title: "Visual drag-and-drop workflow designer"
      status: "draft"
      owner: "unassigned"
      priority: "medium"
      scope: "dashboard"
      acceptance:
        - "React Flow integration for drag-and-drop"
        - "Building blocks for source, transform, output"
        - "YAML export/import of workflows"
      implements: ["FEAT-0005"]
      tests: []

  risks:
    RISK-0001:
      file: "docs/risks/RISK-0001-Note-File-Corruption.md"
      title: ".note file corruption during update"
      status: "mitigating"
      owner: "Edwin"
      likelihood: "low"
      impact: "high"
      mitigation:
        - "Always work on copies first"
        - "Validate file structure before and after"
        - "Maintain backup of original"
        - "Extensive device testing"
      mitigation_tasks: []

    RISK-0002:
      file: "docs/risks/RISK-0002-Data-Loss-Conflicts.md"
      title: "Data loss from sync conflicts"
      status: "open"
      owner: "Edwin"
      likelihood: "medium"
      impact: "high"
      mitigation:
        - "Version history maintained"
        - "User always sees options"
        - "Conflict resolution with AI suggestions"
      mitigation_tasks: []

    RISK-0003:
      file: "docs/risks/RISK-0003-Cloud-API-Dependency.md"
      title: "Cloud API dependency for sync"
      status: "open"
      owner: "Edwin"
      likelihood: "medium"
      impact: "medium"
      mitigation:
        - "Local sync as fallback"
        - "Cache locally during connectivity issues"
        - "Graceful degradation"
      mitigation_tasks: []

  tests:
    TST-0001:
      file: "docs/tests/TST-0001-Frontmatter-Parsing.md"
      title: "Frontmatter parsing test suite"
      status: "passing"
      owner: "Edwin"
      scope: "feature"
      kind: "automated"
      level: "unit"
      entrypoint: "pytest tests/test_frontmatter_parsing.py -v"
      requirements: ["REQ-0001"]
      features: ["FEAT-0001"]
      evidence: ["34 tests passing, 92% coverage"]
      last_run: "2026-01-31"

    TST-0002:
      file: "docs/tests/TST-0002-Basic-Package.md"
      title: "Basic package structure tests"
      status: "passing"
      owner: "Edwin"
      scope: "system"
      kind: "automated"
      level: "unit"
      entrypoint: "pytest tests/test_basic.py -v"
      requirements: []
      features: []
      evidence: ["2 tests passing"]
      last_run: "2026-01-31"

    TST-0003:
      file: "docs/tests/TST-0003-Note-Parser.md"
      title: "Note parser test suite"
      status: "passing"
      owner: "Edwin"
      scope: "feature"
      kind: "automated"
      level: "unit"
      entrypoint: "pytest tests/test_note_parser.py -v"
      requirements: []
      features: []
      evidence: ["4/6 tests passing"]
      last_run: "2026-01-31"

    TST-0004:
      file: "docs/tests/TST-0004-Markdown-To-PDF.md"
      title: "Markdown to PDF converter tests"
      status: "blocked"
      owner: "Edwin"
      scope: "feature"
      kind: "automated"
      level: "integration"
      entrypoint: "pytest tests/test_markdown_to_pdf.py -v"
      requirements: []
      features: []
      evidence: ["Skipped - requires GTK+ libraries"]
      last_run: "2026-01-31"

    TST-0005:
      file: "docs/tests/TST-0005-Pandoc-Converter.md"
      title: "Pandoc converter test suite"
      status: "passing"
      owner: "Edwin"
      scope: "feature"
      kind: "automated"
      level: "integration"
      entrypoint: "pytest tests/test_pandoc_converter.py -v"
      requirements: []
      features: []
      evidence: ["Tests passing"]
      last_run: "2026-01-31"

  workflows:
    WF-0001:
      file: "docs/workflows/WF-0001-Daily-Notes.md"
      title: "Daily Notes Workflow"
      status: "active"
      owner: "Edwin"
      entrypoints:
        - "obsidian-supernote md-to-note"
      prereqs:
        - "Pandoc installed"
        - "Python 3.10+"
      inputs:
        - "Markdown file with frontmatter"
      outputs:
        - ".note file for Supernote"

    WF-0002:
      file: "docs/workflows/WF-0002-Research-Notes.md"
      title: "Research Notes Workflow"
      status: "active"
      owner: "Edwin"
      entrypoints:
        - "obsidian-supernote md-to-note"
      prereqs:
        - "Pandoc installed"
      inputs:
        - "Research article markdown"
      outputs:
        - ".note file with realtime recognition"

    WF-0003:
      file: "docs/workflows/WF-0003-World-Building.md"
      title: "World Building Workflow"
      status: "active"
      owner: "Edwin"
      entrypoints:
        - "obsidian-supernote md-to-note"
      prereqs:
        - "Pandoc installed"
      inputs:
        - "Character/world template markdown"
      outputs:
        - ".note file in standard mode (sketching)"

    WF-0004:
      file: "docs/workflows/WF-0004-Development.md"
      title: "Development Workflow"
      status: "active"
      owner: "Edwin"
      entrypoints:
        - "pytest tests/"
        - "black obsidian_supernote/"
        - "ruff check obsidian_supernote/"
        - "mypy obsidian_supernote/"
      prereqs:
        - "Python venv activated"
        - "Dev dependencies installed"
      inputs:
        - "Source code"
      outputs:
        - "Test results"
        - "Formatted code"

    WF-0005:
      file: "docs/workflows/WF-0005-API-Server.md"
      title: "API Server Workflow"
      status: "active"
      owner: "Edwin"
      entrypoints:
        - "obsidian-supernote serve"
        - "obsidian-supernote serve --port 8080"
        - "obsidian-supernote serve --reload"
      prereqs:
        - "Python venv activated"
        - "Dependencies installed"
      inputs:
        - "Configuration (port, dashboard path)"
      outputs:
        - "REST API at http://localhost:8765/"
        - "WebSocket at ws://localhost:8765/events"

  changes:
    CHG-20260131-Phase3B:
      file: "docs/changes/CHG-20260131-Phase3B-Web-Dashboard.md"
      title: "Implement Phase 3B: Web Dashboard MVP"
      status: "merged"
      owner: "Edwin"
      commit: "3f0d550"
      pr: ""
      impacts:
        - "web-dashboard/"
        - "React + Tailwind frontend"
      features: ["FEAT-0003"]

    CHG-20260130-Phase3A:
      file: "docs/changes/CHG-20260130-Phase3A-Backend-API.md"
      title: "Implement Phase 3A: Python Backend API"
      status: "merged"
      owner: "Edwin"
      commit: "210322e"
      pr: ""
      impacts:
        - "obsidian_supernote/api/"
        - "FastAPI server"
      features: ["FEAT-0002"]

    CHG-20260129-Step2:
      file: "docs/changes/CHG-20260129-Step2-Update-Mode.md"
      title: "Implement .note file update mode (Steps 1-2)"
      status: "merged"
      owner: "Edwin"
      commit: "2e87516"
      pr: ""
      impacts:
        - "obsidian_supernote/converters/note_writer.py"
        - "obsidian_supernote/utils/frontmatter.py"
      features: ["FEAT-0001"]

    CHG-20260128-Frontmatter:
      file: "docs/changes/CHG-20260128-Frontmatter-Properties.md"
      title: "Redesign frontmatter properties (simplified to 2)"
      status: "merged"
      owner: "Edwin"
      commit: "0c165a2"
      pr: ""
      impacts:
        - "obsidian_supernote/utils/frontmatter.py"
        - "Reduced from 6 to 2 properties"
      features: ["FEAT-0001"]

  decisions:
    ADR-0001:
      file: "docs/decisions/ADR-0001-Frontmatter-Approach.md"
      title: "Use YAML frontmatter for configuration"
      status: "accepted"
      owner: "Edwin"
      decision: "Use YAML frontmatter in markdown files for Supernote configuration"
      context: "Need a way to configure .note conversion without separate config files"
      alternatives:
        - "Separate config files per note"
        - "Global config only"
        - "CLI flags only"
      consequences:
        - "No separate config files needed"
        - "Metadata travels with content"
        - "Obsidian-native approach"
        - "Requires parsing frontmatter"

    ADR-0002:
      file: "docs/decisions/ADR-0002-Hybrid-UI-Architecture.md"
      title: "Use hybrid Obsidian Plugin + Python Backend + Web Dashboard"
      status: "accepted"
      owner: "Edwin"
      decision: "Implement hybrid architecture with Obsidian Plugin + FastAPI Backend + React Dashboard"
      context: "Need both native Obsidian integration and complex UI capabilities"
      alternatives:
        - "Pure Obsidian plugin (would require porting Python to TypeScript)"
        - "Electron app (separate from Obsidian)"
        - "CLI only"
      consequences:
        - "100% reuse of existing Python converters"
        - "Native Obsidian integration for quick actions"
        - "Web dashboard for complex configuration"
        - "Requires running backend server"

    ADR-0003:
      file: "docs/decisions/ADR-0003-Device-Recognition.md"
      title: "Use Supernote device-based text recognition"
      status: "accepted"
      owner: "Edwin"
      decision: "Use Supernote's built-in recognition (realtime notes) instead of external OCR"
      context: "Need text extraction from handwritten notes"
      alternatives:
        - "External OCR service (Google Cloud Vision, AWS Textract)"
        - "Local OCR (Tesseract)"
        - "No text extraction"
      consequences:
        - "More accurate for Supernote handwriting"
        - "No API costs"
        - "Data stays on device"
        - "Only works for realtime notes"

metrics:
  counts:
    features_total: 6
    features_done: 3
    tasks_total: 12
    tasks_done: 11
    tests_total: 5
    tests_passing: 4
    tests_failing: 0
    issues_open: 0
    issues_triage: 0
    risks_open: 3
    decisions_total: 3
